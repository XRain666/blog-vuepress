<!DOCTYPE html>
<html lang="zh-cmn-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块系统 | Xavi的技术文档</title>
    <meta name="description" content="个人前端技术文档">
    <link rel="preload stylesheet" href="/XaviDocs/assets/style.cd041632.css" as="style">
    <script type="module" src="/XaviDocs/assets/app.35ef6cb6.js"></script>
    <link rel="preload" href="/XaviDocs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/XaviDocs/assets/chunks/framework.efcc3f75.js">
  <link rel="modulepreload" href="/XaviDocs/assets/chunks/theme.4de104b6.js">
  <link rel="modulepreload" href="/XaviDocs/assets/前端系列_工程化_JS模块化原理.md.40ac25bd.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f5d595a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-df10917c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-df10917c> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f5d595a9 data-v-e312d40f><div class="VPNavBar has-sidebar" data-v-e312d40f data-v-07bb06fb><div class="container" data-v-07bb06fb><div class="title" data-v-07bb06fb><div class="VPNavBarTitle has-sidebar" data-v-07bb06fb data-v-ee97dcec><a class="title" href="/XaviDocs/" data-v-ee97dcec><!--[--><!--]--><!----><!--[-->Xavi的技术文档<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-07bb06fb><div class="curtain" data-v-07bb06fb></div><div class="content-body" data-v-07bb06fb><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-07bb06fb data-v-1f09d4cb><span id="main-nav-aria-label" class="visually-hidden" data-v-1f09d4cb>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" tabindex="0" data-v-1f09d4cb data-v-9ef01ee4 data-v-88c62a46><!--[-->前端系列<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/XaviDocs/%E5%B7%A5%E5%85%B7%E7%B3%BB%E5%88%97/VitePress%E6%90%AD%E5%BB%BA/%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA" tabindex="0" data-v-1f09d4cb data-v-9ef01ee4 data-v-88c62a46><!--[-->工具系列<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-07bb06fb data-v-711dce0e><label title="toggle dark mode" data-v-711dce0e data-v-997b6711><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-997b6711 data-v-f1d637d5><span class="check" data-v-f1d637d5><span class="icon" data-v-f1d637d5><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-997b6711><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-997b6711><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-07bb06fb data-v-56f564f6 data-v-5489a030><!--[--><a class="VPSocialLink" href="https://github.com/Xaviw/XaviDocs" aria-label="github" target="_blank" rel="noopener" data-v-5489a030 data-v-d6740462><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://juejin.cn/user/3192637500426840" aria-label target="_blank" rel="noopener" data-v-5489a030 data-v-d6740462><svg t="1673920149000" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="691" width="128" height="128"><title>掘金</title><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" p-id="692"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" p-id="693"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-07bb06fb data-v-b3dbf042 data-v-64ffb2ed><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-64ffb2ed><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-64ffb2ed><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-64ffb2ed><div class="VPMenu" data-v-64ffb2ed data-v-dc4b8c80><!----><!--[--><!--[--><!----><div class="group" data-v-b3dbf042><div class="item appearance" data-v-b3dbf042><p class="label" data-v-b3dbf042>切换主题</p><div class="appearance-action" data-v-b3dbf042><label title="toggle dark mode" data-v-b3dbf042 data-v-997b6711><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-997b6711 data-v-f1d637d5><span class="check" data-v-f1d637d5><span class="icon" data-v-f1d637d5><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-997b6711><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-997b6711><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-b3dbf042><div class="item social-links" data-v-b3dbf042><div class="VPSocialLinks social-links-list" data-v-b3dbf042 data-v-5489a030><!--[--><a class="VPSocialLink" href="https://github.com/Xaviw/XaviDocs" aria-label="github" target="_blank" rel="noopener" data-v-5489a030 data-v-d6740462><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://juejin.cn/user/3192637500426840" aria-label target="_blank" rel="noopener" data-v-5489a030 data-v-d6740462><svg t="1673920149000" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="691" width="128" height="128"><title>掘金</title><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" p-id="692"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" p-id="693"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-07bb06fb data-v-5a63b892><span class="container" data-v-5a63b892><span class="top" data-v-5a63b892></span><span class="middle" data-v-5a63b892></span><span class="bottom" data-v-5a63b892></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-f5d595a9 data-v-b1ad04b0><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b1ad04b0><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-b1ad04b0><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-b1ad04b0>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-b1ad04b0 data-v-e8809de7><button class="" data-v-e8809de7>目录 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-e8809de7><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></button><!----></div></div><aside class="VPSidebar" data-v-f5d595a9 data-v-951d249a><div class="curtain" data-v-951d249a></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-951d249a><span class="visually-hidden" id="sidebar-aria-label" data-v-951d249a> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-951d249a><section class="VPSidebarItem level-0" data-v-951d249a data-v-2c6a328f><div class="item" role="button" tabindex="0" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><h2 class="text" data-v-2c6a328f>源码系列</h2><!----></div><div class="items" data-v-2c6a328f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>Axios</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-951d249a><section class="VPSidebarItem level-0 has-active" data-v-951d249a data-v-2c6a328f><div class="item" role="button" tabindex="0" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><h2 class="text" data-v-2c6a328f>工程化</h2><!----></div><div class="items" data-v-2c6a328f><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E5%B7%A5%E7%A8%8B%E5%8C%96/JS%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8E%9F%E7%90%86" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>JS模块化原理</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%8E%8C%E6%8F%A1package" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>掌握package.json</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-951d249a><section class="VPSidebarItem level-0" data-v-951d249a data-v-2c6a328f><div class="item" role="button" tabindex="0" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><h2 class="text" data-v-2c6a328f>uniapp</h2><!----></div><div class="items" data-v-2c6a328f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/uniapp/uniapp%E5%AF%B9%E6%AF%94%E5%8E%9F%E7%94%9F%E5%B0%8F%E7%A8%8B%E5%BA%8F" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>uniapp对比原生小程序</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/uniapp/%E8%A7%A3%E5%86%B3%E9%A6%96%E9%A1%B5%E9%97%AA%E7%83%81%E9%97%AE%E9%A2%98" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>解决首页闪烁问题</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2c6a328f data-v-2c6a328f><div class="item" data-v-2c6a328f><div class="indicator" data-v-2c6a328f></div><a class="VPLink link link" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/uniapp/%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%80%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B5%AE%E5%B1%82" data-v-2c6a328f data-v-88c62a46><!--[--><p class="text" data-v-2c6a328f>实现全局自定义浮层</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f5d595a9 data-v-b727feb9><div class="VPDoc has-sidebar has-aside" data-v-b727feb9 data-v-3c3b0392><div class="container" data-v-3c3b0392><div class="aside" data-v-3c3b0392><div class="aside-curtain" data-v-3c3b0392></div><div class="aside-container" data-v-3c3b0392><div class="aside-content" data-v-3c3b0392><div class="VPDocAside" data-v-3c3b0392 data-v-dd40958f><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-dd40958f data-v-d6e27c98><div class="content" data-v-d6e27c98><div class="outline-marker" data-v-d6e27c98></div><div class="outline-title" data-v-d6e27c98>目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-d6e27c98><span class="visually-hidden" id="doc-outline-aria-label" data-v-d6e27c98> Table of Contents for current page </span><ul class="root" data-v-d6e27c98 data-v-2a68347c><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-dd40958f></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3c3b0392><div class="content-container" data-v-3c3b0392><!--[--><!--]--><div class="VPDocOutlineDropdown" data-v-3c3b0392 data-v-61425d73><button class="" data-v-61425d73>目录 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-61425d73><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></button><!----></div><main class="main" data-v-3c3b0392><div style="position:relative;" class="vp-doc _XaviDocs_%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97_%E5%B7%A5%E7%A8%8B%E5%8C%96_JS%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8E%9F%E7%90%86" data-v-3c3b0392><div><h1 id="模块系统" tabindex="-1">模块系统 <a class="header-anchor" href="#模块系统" aria-label="Permalink to &quot;模块系统&quot;">​</a></h1><p>JavaScript在设计之初并没有想到会用于实现复杂的功能，所以没有提供模块化功能。但在逐步的发展中，没有模块化暴露出了很严重的问题：</p><ol><li>命名冲突</li></ol><p><code>HTML</code>中通过<code>script</code>标签加载每个脚本，并按顺序执行。所以需要十分小心脚本中的变量名是否与其他脚本冲突</p><ol><li>不利于代码拆分</li></ol><p>当代码量增加时，拆分文件很有必要。但<code>script</code>标签加载的方式要求每个脚本的书写顺序必须正确，一旦脚本数量增加，会带来很重的心智负担</p><hr><p>为了解决这些问题，涌现过一系列的模块化方案，可以阅读<a href="https://github.com/myshov/history-of-javascript/tree/master/4_evolution_of_js_modularity" target="_blank" rel="noreferrer">The Evolution of JavaScript Modularity</a>或<a href="https://github.com/Yingkaixiang/evolution-of-js-modularity" target="_blank" rel="noreferrer">译文</a>了解JS模块化发展历史。本文仅介绍立即执行函数和如今使用的<code>CommonJS</code>、<code>ESModule</code></p><h2 id="立即执行函数" tabindex="-1">立即执行函数 <a class="header-anchor" href="#立即执行函数" aria-label="Permalink to &quot;立即执行函数&quot;">​</a></h2><blockquote><p>英文全称<code>Immediately Invoked Function Expression</code>，简称<code>IIFE</code></p></blockquote><p>通过JS的函数作用域实现模块化是早期最为流行的一种方案，这也是为什么面试几乎必问闭包的原因，算是一种历史传承</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 脚本逻辑</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 函数内的变量在其他脚本中无法访问，不会造成作用域污染</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 或者</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> someMethod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这就实现了最为经典的模块化方案，其中第一个分号是因为通过<code>script</code>标签加载多个脚本时，前面的脚本可能没有写分号结尾，这就会导致JS解析为<code>(第一个脚本)()(第二个脚本)</code>的格式，也就是说第二个脚本的括号被当作了函数调用的括号</p><p>后来这种以分号开头，结尾不写分号的立即执行函数格式成了很多程序员默认的规范写法</p><h2 id="commonjs-cjs" tabindex="-1">CommonJS(CJS) <a class="header-anchor" href="#commonjs-cjs" aria-label="Permalink to &quot;CommonJS(CJS)&quot;">​</a></h2><p><code>CommonJS</code>是<code>NodeJS</code>采用的模块化规范（现在也支持<code>ESModule</code>）</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-sDFl3" id="tab-MktyDc0" checked="checked"><label for="tab-MktyDc0">导出</label><input type="radio" name="group-sDFl3" id="tab-zMD0Vjq"><label for="tab-zMD0Vjq">导入</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 也可以直接使用exports</span></span>
<span class="line"><span style="color:#89DDFF;">exports.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> lib </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lib.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(lib</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name) </span><span style="color:#676E95;font-style:italic;">// 打印 value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 对于不需要接收值的模块，可以只导入</span></span>
<span class="line"><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lib.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><h3 id="原理" tabindex="-1">原理 <a class="header-anchor" href="#原理" aria-label="Permalink to &quot;原理&quot;">​</a></h3><p>下面模拟一下<code>CommonJS</code>实现模块化的大致原理（仅帮助理解执行流程，与真正的实现方式有差异）。假设拥有如下两个模块：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-ZjtHS" id="tab-1WcOVbE" checked="checked"><label for="tab-1WcOVbE">index.js</label><input type="radio" name="group-ZjtHS" id="tab-aXhV87C"><label for="tab-aXhV87C">a.js</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>可以将<code>CommonJS</code>看作是一个构建插件，会将上面的两个模块处理成如下的格式：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Module类</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Module</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">exports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 省略类初始化参数及其他初始化属性</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 设置缓存对象</span></span>
<span class="line"><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_cache </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 挂载原型方法require</span></span>
<span class="line"><span style="color:#FFCB6B;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">path</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 1.计算绝对路径</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filename</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">计算绝对路径</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 2.判断是否有缓存</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cache</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_cache</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">filename</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cache</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cache</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 3.判断是否内置模块</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">内置模块中存在filename</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">内置模块</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 4.生成模块实例，存入缓存</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">module</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Module</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_cache</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">filename</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">module</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 创建module.exports的引用，用于提供exports.key=value的简化写法</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">module.exports</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 5.加载模块</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">content</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">读取脚本内容</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 6.执行模块</span></span>
<span class="line"><span style="color:#F07178;">  (</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">content</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">exports</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">require</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">module</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 模块代码被包装到拥有exports、require、module的函数中执行</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 所以模块中能够直接使用这三个变量</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 通过module.exports=导出的对象也就存储到了该模块实例的exports属性中</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 其他模块再require该模块时，即可从第2步返回的缓存实例对象中获取exports</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// eval是执行代码字符串的方法，参考https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">eval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">content</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">module.exports,</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">module</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 调用入口模块</span></span>
<span class="line"><span style="color:#FFCB6B;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 运行到入口中的require(&#39;./a.js&#39;)时，又会构建a.js的Module实例，并执行a.js代码</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 整个过程是逐行的方式同步执行全部脚本</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>从上面的伪代码可以观察到<code>CommonJS</code>的几个特点：</p><ol><li><code>require</code>加载模块是同步执行的（运行到<code>require</code>那一行才会执行对应的模块）</li><li>模块只有在第一次被加载时才会执行，后续加载都是读取的缓存</li><li>通过模块路径读取缓存，如果路径不同会重新加载（<code>NodeJS</code>中支持<code>URL</code>格式的路径，所以添加<code>?key=value</code>等符号会使同一个模块重新加载）</li><li>如果未导出任何值，<code>require</code>返回的是初始化的<code>exports</code>空对象</li><li><code>module.exports</code>导出的就是等号接收的值（浅拷贝），对象类型的值各模块可以通过引用共享，简单值则不会互相影响</li><li>虽然<code>exports</code>和<code>module.exports</code>是同一个对象，但不推荐直接使用<code>exports</code>。因为<code>exports</code>只能用挂载属性的方式导出：<code>exports.key = value</code>，如果误写为<code>exports = value</code>的形式，只是改写了<code>exports</code>变量的值，而真正的<code>module.exports</code>属性并未接收到值</li></ol><p>关于浅拷贝，可以根据这张图理解:</p><p><img src="/XaviDocs/images/前端系列/工程化-JS模块化原理-1.png" alt="CommonJS模块化原理"></p><h3 id="模块匹配规则" tabindex="-1">模块匹配规则 <a class="header-anchor" href="#模块匹配规则" aria-label="Permalink to &quot;模块匹配规则&quot;">​</a></h3><p><code>CommonJS</code>导入<code>JSON</code>文件会将文件中的内容解析后导入</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 例如json文件内容为：{&quot;a&quot;:&quot;a&quot;}，被导入时就相当于</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>CommonJS</code>模块解析策略中除了<code>.js</code>、<code>.json</code>、<code>.node</code>之外的扩展名，其他文件均会视为<code>js</code>文件进行处理</p><p>未找到与传入路径完全匹配的模块时，会依次尝试添加<code>.js</code>、<code>.json</code>、<code>.node</code>扩展名进行匹配</p><div class="tip custom-block"><p class="custom-block-title">CommonJS详细的加载顺序为：</p><p>使用相对或绝对路径导入时</p><ol><li>判断是否有完全匹配路径的文件</li><li>依次尝试<code>.js</code>，<code>.json</code>，<code>.node</code>扩展名进行匹配（路径无扩展名则添加扩展名，路径本身有扩展名则修改扩展名）</li><li>尝试寻找同名文件夹（去掉扩展名）</li><li>如果有同名文件夹，且内部有<code>package.json</code>文件和正确的<code>exports</code>字段，尝试解析其指定规则的文件（没有与规则路径完全匹配的文件时，前面的规则仍适用）</li><li>如果没有正确的<code>exports</code>字段，但有正确的<code>main</code>字段，尝试加载<code>main</code>字段对应的文件（没有与规则路径完全匹配的文件时，前面的规则仍适用）</li><li>如果有同名文件夹，但没有<code>package.json</code>或<code>exports</code>、<code>main</code>字段均不正确，在文件夹中按第二条规则尝试查找<code>index</code>文件</li></ol><p>直接通过包名导入时（<code>require(&#39;package&#39;)</code>），会查找当前目录或最近上级目录中的<code>node_modules</code>文件夹，然后再根据上诉规则在<code>node_modules</code>文件夹中查找</p><p>如果均匹配失败，报错<code>Cannot find module</code></p></div><h3 id="循环加载规则" tabindex="-1">循环加载规则 <a class="header-anchor" href="#循环加载规则" aria-label="Permalink to &quot;循环加载规则&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-O86Am" id="tab-GFU3teL" checked="checked"><label for="tab-GFU3teL">a.js</label><input type="radio" name="group-O86Am" id="tab-4CAXhOp"><label for="tab-4CAXhOp">b.js</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./b.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(b) </span><span style="color:#676E95;font-style:italic;">// b</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a) </span><span style="color:#676E95;font-style:italic;">// {}</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div><p>当出现如上的循环引用时，<code>CommonJS</code>的处理比较特殊：</p><p><code>a</code>执行时，第一行是加载<code>b</code>，此时<code>a</code>会停住，开始执行<code>b</code></p><p><code>b</code>又导入了<code>a</code>，但是<code>a</code>不会被重复加载，因为模块判断<code>a</code>已经被执行过了，缓存中<code>a</code>的值是已被执行的部分，也就是没有导出，所以打印为<code>module.exports</code>初始的空对象<code>{}</code></p><p>等<code>b</code>执行完毕，再将执行权交回到<code>a</code>，这时导入的<code>b</code>取到了值，所以打印就为<code>b</code></p><p><strong>但需要注意的是，语言特性中的函数提升会早于<code>require</code>读取，所以循环引用中写在<code>require</code>后的<code>function</code>声明还是会先被加载</strong>（<code>var</code>也会提升，但未赋值前都是<code>undefined</code>所以没什么影响）</p><h2 id="es-module" tabindex="-1">ES Module <a class="header-anchor" href="#es-module" aria-label="Permalink to &quot;ES Module&quot;">​</a></h2><blockquote><p>全称<code>EcmaScript Module</code>，是官方在<code>ES6</code>中推出的标准模块化方案，无论是<code>Node</code>端还是浏览器端，基本已全面支持</p></blockquote><h3 id="语法-1" tabindex="-1">语法 <a class="header-anchor" href="#语法-1" aria-label="Permalink to &quot;语法&quot;">​</a></h3><p>导出：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 直接导出变量、函数，let、var同理</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> value</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">func</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 先声明变量再导出</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> value</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">func</span><span style="color:#89DDFF;">(){}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导出重命名</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">otherKey</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">otherFunc</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 默认导出，一个模块只能有一个默认导出，具名导出可以有多个，且可以和默认导出同时拥有</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> value</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>导入:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 导入非默认导出的变量</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导入重命名</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">otherKey</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">otherFunc</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 整体导入，通过obj.key、obj.func调用</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导入默认导出的数据，name可以任意取</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 重命名默认导出</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">otherName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导入同时有默认导出和具名导出的数据</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 仅执行模块，而不获取任何变量</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>导出导入也支持复合写法，可以简化某些情况的书写：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 可以简单理解为</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bar</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 同样支持重命名和整体再导出</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">foo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">myFoo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> newName </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 默认导出的再导出语法为</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>浏览器中也已支持<code>ESModule</code>模块，采用异步加载的方式，等同于<code>script</code>添加了<code>defer</code>关键字，多个<code>ESModule script</code>标签同样会按照书写顺序加载和执行。也可以添加<code>async</code>关键字，这时候模块会在加载完成时立即执行</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 等同于 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">defer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 添加async时，脚本加载完成时便会立即执行 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">async</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block"><p class="custom-block-title"><code>defer</code>与<code>async</code>的区别是：</p><p><code>defer</code>要等到整个页面在内存中正常渲染结束（<code>DOM</code> 结构完全生成，以及其他脚本执行完成），才会执行；<code>async</code>一旦下载完，渲染引擎就会中断渲染，执行这个脚本以后，再继续渲染。一句话，<code>defer</code>是“渲染完再执行”，<code>async</code>是“下载完就执行”。另外，如果有多个<code>defer</code>脚本，会按照它们在页面出现的顺序加载，而多个<code>async</code>脚本是不能保证加载顺序的。</p></div><h3 id="原理-1" tabindex="-1">原理 <a class="header-anchor" href="#原理-1" aria-label="Permalink to &quot;原理&quot;">​</a></h3><p><code>ES6</code>模块化的思想是静态化，使编译时就能够确定模块间依赖关系，以及输入输出的变量，不同于<code>CommonJS</code>需要实际运行到那一行才能确定这些东西。静态化带来的好处是：</p><ul><li>静态分析可以帮助实现类型检验、<code>TreeShaking</code>等实用功能</li><li>将来官方扩充API时，就不在必须做成全局属性，而可以通过提供模块的方式</li></ul><p>浏览器中的<code>ES</code>模块，通常采用只用<code>script</code>标签加载一个入口模块的方式，再通过模块间的依赖解析依次加载需要的模块。下面用一个简单的<code>Vue</code>项目例子，帮助理解<code>ES</code>模块解析的过程：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-bob-q" id="tab-kp_jMdN" checked="checked"><label for="tab-kp_jMdN">html</label><input type="radio" name="group-bob-q" id="tab-soGuPK1"><label for="tab-soGuPK1">main.js</label><input type="radio" name="group-bob-q" id="tab-6xcs_0L"><label for="tab-6xcs_0L">App.vue</label><input type="radio" name="group-bob-q" id="tab-k0Vl2OU"><label for="tab-k0Vl2OU">config.js</label></div><div class="blocks"><div class="language-html active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 省略其他代码 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./main.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">createApp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> App </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./App.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createApp</span><span style="color:#A6ACCD;">(App)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">h</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> str </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./config.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// template模板形式的vue文件，实际上也是被解析为类似的render函数形式</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">h</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>在<code>HTML</code>代码解析完毕后，因为识别到<code>type=&quot;module&quot;</code>，所以引擎会采用异步加载的方式，直接开始下载<code>main.js</code>文件</p><p>在文件下载结束，且<code>div#app</code>被渲染完毕后<code>main.js</code>便会被引擎中的<code>ES</code>模块解析器解析。解析器会从入口开始下载并解析后续的每一个模块，并收集所有的<code>import</code>、<code>export</code>，构建模块依赖图（这是在引擎解析过程中完成的，代码还未转换为机器码执行）</p><p>收集<code>export</code>的同时，会为这些导出的变量开辟存储空间。在所有模块全部解析完成后，会从最后一个完成解析的最底层模块开始以深度优先后续遍历的方式层层往上，将每一个<code>import</code>、<code>export</code>链接到对应的内存地址中，称为软链接（<code>linking</code>）</p><p>完成上诉解析步骤后，引擎已经有了完整的模块依赖图，可以开始执行代码</p><p>第一句<code>import { createApp } from &#39;vue&#39;</code>会让浏览器开始执行<code>vue</code>相关的代码。执行过程中会对<code>createApp</code>这个导出变量进行求值，并填充到对应内存地址,因为<code>import</code>已链接这个地址，所以模块中能正确获取到<code>createApp</code>方法</p><p>第二句<code>import App from &#39;./App.vue&#39;</code>会开始执行<code>App.vue</code>文件（正式环境中是被解析后的<code>js</code>文件，而不是<code>.vue</code>），<code>App.vue</code>内部又从<code>vue</code>中引入了<code>h</code>函数，因为<code>vue</code>模块在模块依赖图中标记已被执行，所以会直接取得<code>h</code>函数的内存地址，然后开始执行<code>config.js</code></p><p><code>config.js</code>中对导出变量进行了赋值，回到<code>App.vue</code>中执行，又对<code>render</code>函数进行了赋值。最后回到<code>main.js</code>开始执行<code>createApp</code>函数，<code>createApp</code>内部会调用<code>render</code>函数，返回执行<code>h</code>函数生成的虚拟<code>DOM</code>，再由<code>createApp</code>挂载到<code>div#app</code>上，这就完成了整个应用的执行流程</p><hr><p>因为<code>ESModule</code>是在执行前被<code>JS</code>引擎静态分析，所以无法在导入中使用变量，或将导入导出放在逻辑之中：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 报错，因为if逻辑只在运行中才能确定</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (x </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">module</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导入无法使用变量，只能将导入放在模块最外层，规范为模块顶部</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> varName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> `</span><span style="color:#A6ACCD;">$</span><span style="color:#F07178;">{</span><span style="color:#A6ACCD;">varName</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">js</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;"> } from &#39;module&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>ES</code>模块中还有一些特性：</p><ol><li><code>ES</code>模块文件中会自动采用严格模式，严格模式相关规则查看<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noreferrer">MDN-严格模式</a></li><li><code>ES</code>模块支持顶层<code>await</code>（也就是代码最外层，非函数内部也可以使用，会断住模块主流程）</li><li>模块中顶层<code>this</code>为<code>undefined</code>，而不是<code>window</code>，可以用这个特性区分模块类型</li><li>导入<code>json</code>文件需要做断言<code>import name from &#39;./xxx.json&#39; assert { type: &#39;json&#39; }</code>，只能使用默认导入的方式，导入数据为<code>json</code>解析后的对象</li></ol><h3 id="模块匹配规则-1" tabindex="-1">模块匹配规则 <a class="header-anchor" href="#模块匹配规则-1" aria-label="Permalink to &quot;模块匹配规则&quot;">​</a></h3><p><code>ES</code>模块相比于<code>CommonJS</code>，只支持导入<code>.js</code>、<code>.mjs</code>、<code>.cjs</code>、<code>.json</code>格式的文件，且模块路径必须完全匹配，包括扩展名。所以<code>ES</code>模块匹配规则直接在<code>CommonJS</code>上进行精简即可：</p><p>使用相对或绝对路径导入时，直接尝试查找完全匹配路径的文件</p><p>通过包名导入时（<code>import &#39;package&#39;</code>），会查找当前目录或最近上级目录中的<code>node_modules</code>文件夹。如果<code>node_modules</code>中有同名文件夹，且内部有<code>package.json</code>文件和正确的<code>exports</code>字段，尝试解析其指定规则的文件</p><p>否则匹配失败，报错<code>Cannot find package</code>（在<code>webpack</code>等打包器中，会扩展<code>ESModule</code>支持<code>CommonJS</code>的解析规则，要注意并不是<code>ES</code>模块的原生解析规则）</p><h3 id="循环加载规则-1" tabindex="-1">循环加载规则 <a class="header-anchor" href="#循环加载规则-1" aria-label="Permalink to &quot;循环加载规则&quot;">​</a></h3><p><code>ESModule</code>处理循环加载与<code>CommonJS</code>有本质的不同。<code>CommonJS</code>使用拷贝值，而<code>ESModule</code>通过软链接到导出变量的内存地址</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// a.mjs</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./b.mjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(b)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b.mjs</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.mjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 执行a.mjs的打印结果：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ReferenceError: a is not defined</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 如果是CommonJS的话，可以结合上文推算下，结果是：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// {}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// a</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在上面的例子中，<code>a.js</code>首先引用了<code>b.js</code>，会马上开始执行<code>b.js</code>。而<code>b.js</code>第一行又是引用<code>a.js</code>，这时模块依赖关系中判断<code>a</code>已经处理过，所以不会重复执行</p><p>然后打印<code>&#39;b&#39;</code>，之后再执行打印<code>a</code>，因为此时的<code>a.js</code>模块中导出语句还未执行，也就是软链接地址中还未赋值，所以无法找到<code>a</code>，便会报错（只开辟了空间但未赋值，不同于空间中赋值为<code>undefined</code>）</p><p><strong>但与<code>CommonJS</code>一样，函数的提升还是会早于<code>import</code>的执行</strong>，所以如果把上面的导出换成函数，结果便会不一样</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// a.mjs</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./b.mjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(b)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.mjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(a)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 执行a.js的打印结果：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// [Function: default]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// a</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// [Function: default]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="es模块中加载commonjs模块" tabindex="-1">ES模块中加载CommonJS模块 <a class="header-anchor" href="#es模块中加载commonjs模块" aria-label="Permalink to &quot;ES模块中加载CommonJS模块&quot;">​</a></h3><p>因为<code>CommonJS</code>是同步加载的，而<code>ES</code>模块内部支持顶层<code>await</code>导致不能被同步加载，所以<code>CommonJS</code>并不支持混用<code>ES</code>模块。但反过来同步的<code>CommonJS</code>代码是能被<code>ESModule</code>加载的</p><p>因为需要执行才能确定导出值，<code>CommonJS</code>模块无法被<code>ES</code>模块解析器静态分析，所以只能被整体加载:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 报错</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commonjs-package</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 正确</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> packageMain </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">commonjs-package</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> method </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> packageMain</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 也可以再次导出，使支持ES模块单个加载</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>NodeJS</code>的内置模块是支持指定加载的:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 整体加载</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> EventEmitter </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">events</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 加载指定的输出项</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">readFile</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="动态加载函数-import" tabindex="-1">动态加载函数-import() <a class="header-anchor" href="#动态加载函数-import" aria-label="Permalink to &quot;动态加载函数-import()&quot;">​</a></h2><p>因为<code>ES</code>模块采用软链接的方式，所以这些内存地址是只读的，也就是说无法直接修改导入的变量：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Uncaught TypeError: Assignment to constant variable.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>为了弥补这个缺陷，在<code>ES2020</code>提案中引入了<code>import()</code>函数，支持动态加载模块，语法为：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./module.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 上面提到的例子也就支持了</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (x </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">import</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> varName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">`${</span><span style="color:#A6ACCD;">varName</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">Module.js</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>能看出来，<code>vue</code>中的路由懒加载与<code>vite</code>中的模块动态加载便是用的<code>import</code>函数语法</p><p><code>import</code>函数会返回一个<code>Promise</code>对象，可以用在任何地方，包括<code>CommonJS</code>模块中。因为动态加载的原因，所以<code>import</code>函数与被加载模块没有静态链接关系，这点与<code>import</code>语句不同</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-CVAbL" id="tab-Pr6VbgP" checked="checked"><label for="tab-Pr6VbgP">a.js</label><input type="radio" name="group-CVAbL" id="tab-B5QyUTN"><label for="tab-B5QyUTN">b.js</label><input type="radio" name="group-CVAbL" id="tab-gCBZI9a"><label for="tab-gCBZI9a">c.mjs</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./b.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">import</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">./</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">.mjs</span><span style="color:#89DDFF;">`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">c</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ccccccc</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>执行<code>node a.js</code>后会打印<code>[Module: null prototype] { default: &#39;ccccccc&#39; }</code></p><p><code>ES2020</code>中还为<code>import</code>属性添加一个元属性<code>i<wbr>mport.meta</code>，返回当前模块的元信息。具体返回哪些属性，标准没有规定，但至少包含下面两个属性：</p><ol><li><code>i<wbr>mport.meta.url</code>：返回当前模块的<code>url</code>路径，如<code>https://foo.com/main.js</code></li><li><code>i<wbr>mport.meta.scriptElement</code>：是浏览器特有的原属性会返回加载模块的<code>script</code>标签元素</li></ol><p><code>i<wbr>mport.meta</code>是可扩展的，通过<code>i<wbr>mport.meta.key = value</code>的形式扩展属性，整个项目其他<code>ES</code>模块中也能访问，例如<code>vite</code>中扩展了<code>i<wbr>mport.meta.env</code></p></div></div></main><footer class="VPDocFooter" data-v-3c3b0392 data-v-1c88533b><!--[--><!--]--><div class="edit-info" data-v-1c88533b><div class="edit-link" data-v-1c88533b><a class="VPLink link edit-link-button" href="https://github.com/Xaviw/XaviDocs/edit/master/docs/前端系列/工程化/JS模块化原理.md" target="_blank" rel="noreferrer" data-v-1c88533b data-v-88c62a46><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-1c88533b><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 修改本文<!--]--><!----></a></div><div class="last-updated" data-v-1c88533b><p class="VPLastUpdated" data-v-1c88533b data-v-317b4757>更新时间: <time datetime="2023-03-19T11:13:54.000Z" data-v-317b4757></time></p></div></div><div class="prev-next" data-v-1c88533b><div class="pager" data-v-1c88533b><a class="pager-link prev" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" data-v-1c88533b><span class="desc" data-v-1c88533b>上一篇</span><span class="title" data-v-1c88533b>Axios</span></a></div><div class="has-prev pager" data-v-1c88533b><a class="pager-link next" href="/XaviDocs/%E5%89%8D%E7%AB%AF%E7%B3%BB%E5%88%97/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%8E%8C%E6%8F%A1package" data-v-1c88533b><span class="desc" data-v-1c88533b>下一篇</span><span class="title" data-v-1c88533b>掌握package.json</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"工具系列_实用工具_实用浏览器工具.md\":\"ea845b22\",\"前端系列_源码阅读_vuex源码解析.md\":\"f39f9f6e\",\"前端系列_uniapp_实现全局自定义浮层.md\":\"4ad07d4c\",\"前端系列_uniapp_uniapp对比原生小程序.md\":\"0908a909\",\"工具系列_vitepress搭建_主题配置.md\":\"ee18eef7\",\"工具系列_vitepress搭建_自动生成目录.md\":\"5a5bd7ff\",\"前端系列_uniapp_解决首页闪烁问题.md\":\"f4128f85\",\"工具系列_编辑器_hbuilderx设置.md\":\"ff89a392\",\"工具系列_编辑器_vscode插件推荐.md\":\"d6591db5\",\"工具系列_vitepress搭建_首页配置.md\":\"0fb1f798\",\"前端系列_工程化_掌握package.md\":\"3f82e77a\",\"index.md\":\"acdbfe9f\",\"前端系列_工程化_js模块化原理.md\":\"40ac25bd\",\"工具系列_vitepress搭建_基础搭建.md\":\"84554090\",\"工具系列_vitepress搭建_配置解析.md\":\"809b92b6\",\"工具系列_编辑器_vscode设置.md\":\"a2d76f08\",\"工具系列_实用工具_windows实用工具.md\":\"48366468\",\"工具系列_vitepress搭建_进阶语法.md\":\"2e766ca2\",\"工具系列_编辑器_实用语法-jsdoc、emmet.md\":\"3464db4e\",\"前端系列_源码阅读_axios源码解析.md\":\"18fff938\",\"工具系列_vitepress搭建_扩展首页内容.md\":\"4843d066\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zh-cmn-Hans\",\"dir\":\"ltr\",\"title\":\"Xavi的技术文档\",\"description\":\"个人前端技术文档\",\"base\":\"/XaviDocs/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"pages\":[{\"frontMatter\":{\"date\":[1679409070196,1679409070196]},\"path\":\"./前端系列/uniapp/uniapp对比原生小程序\",\"content\":\"   uniapp和原生小程序都有不少的槽点，但相对来说更推荐uniapp    uniapp官方文档-选型指南提供了详细的多方对比评测，需要深入了解可以阅读参考    APP端的跨端框架发展迅猛，本文仅针对小程序端进行对比    我个人的看法是：涉及跨端那就是无底的大坑，但\",\"title\":\"uniapp对比原生小程序\"},{\"frontMatter\":{\"date\":[1679409064000,1679409064000]},\"path\":\"./工具系列/编辑器/HBuilderX设置\",\"content\":\" HBuilderX在代码格式化方面与VSCode相差甚远，但没办法还得继续用。所以配置了一套自用基本顺手的配置，保存在仓库HBuilderX-Settings中   - [eslint-js](https://ext.dcloud.net.cn/plu\",\"title\":\"HBuilderX设置\"},{\"frontMatter\":{\"date\":[1678894818000,1679224434000]},\"path\":\"./前端系列/工程化/JS模块化原理\",\"content\":\" JavaScript在设计之初并没有想到会用于实现复杂的功能，所以没有提供模块化功能。但在逐步的发展中，没有模块化暴露出了很严重的问题：  1. 命名冲突  HTML中通过script标签加载每个脚本，并按顺序执行。所以需要十分小心脚本中的变量名是否与其他脚本冲突  1. 不利于代码拆分  当代码量增加时，拆分文件很有必要。但script标签加载的方式要求每个脚本的书写\",\"title\":\"JS模块化原理\"},{\"frontMatter\":{\"date\":[1678894818000,1679224434000]},\"path\":\"./前端系列/工程化/掌握package\",\"content\":\" package.json存在于每个基于node的前端工程化项目中，所以正确的认识该文件中的字段，对理清项目流程、提升工程化能力格外重要   中文文档中翻译的介绍，理解起来仍有难度。简单来说package.json就是一个包（`packa\",\"title\":\"掌握package\"},{\"frontMatter\":{\"date\":[1677839312000,1677839312000]},\"path\":\"./工具系列/VitePress搭建/扩展首页内容\",\"content\":\"   许多的自定义主题中都有提取页面并以列表形式展示在首页的功能，例如主题配置中介绍的vitepress-blog-zaun    类似的实现思路都是通过NodeJS在构建阶段读取项目中的`\",\"title\":\"扩展首页内容\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./前端系列/源码阅读/Axios源码解析\",\"content\":\"      阅读源码前先熟悉库实际的使用方式以及各种API有助于找到阅读的切入点，官方中文文档    axios库基于核心类Axios，在库中默认导出了一个名为axios的实例对象，并传入了基础配置defaults    使用中所有的操作通常基于默认导出的实\",\"title\":\"Axios源码解析\"},{\"frontMatter\":{\"date\":[1677761461000,1679409064000]},\"path\":\"./前端系列/uniapp/解决首页闪烁问题\",\"content\":\"      大部分需要登录的程序在进入时都会先判断用户是否登录，再决定跳转登录页还是首页。uniapp将pages.json中第一项作为项目首页，这也导致了如果登录页作为第一页，用户已登录时就会先显示登录页然后很快跳转到首页，出现页面“闪烁”现象       在APP端提供了启动界面配置，可以将Splash图设置\",\"title\":\"解决首页闪烁问题\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./前端系列/uniapp/实现全局自定义浮层\",\"content\":\"   业务场景中有许多的全局浮层需求，例如WEB端常见的登录框浮层，带有抢单功能的APP、小程序等        在WEB端可以通过将浮层组件定义在顶层父组件中\",\"title\":\"实现全局自定义浮层\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/基础搭建\",\"content\":\"   VitePress是Vue团队提供的一个基于`Vue 3与Vite的开源框架，通过MarkDown文档和简单配置就能快速生成静态文档站点。与基于WebPack的VuePress相比，VitePress`拥有更快的启动和打包速度    除了支持标准和扩展的md语法外，VitePress还支持在md文档内书写`Vue\",\"title\":\"基础搭建\"},{\"frontMatter\":{\"title\":\"VitePress进阶语法\",\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/进阶语法\",\"content\":\"        在涉及到引用其他文件时需要注意路径的书写：    1. 引用网络地址，直接写完整链接  2. []()跳转项目内页面时，支持相对路径或绝对路径，绝对路径应该写为页面链接基础路径后的部分（比如docs/a/b.md文件，绝对路径为/a/b，扩展名md或html可以省略）  3. ![]()展示项\",\"title\":\"进阶语法\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/配置解析\",\"content\":\"     截止发文，VitePress最新版本为v1.0.0-alpha.48，alpha表示测试版，这代表配置项在后续可能会有变动,建议对比最新的版本配置查看    也可以直接安装相同的版本：`npm i vitepress @1.0.0-alpha.48 -D`     **页面中可以通过[FrontMatter](/工具\",\"title\":\"配置解析\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/首页配置\",\"content\":\"   docs/index.md会作为文档中的首页，可以通过FrontMatter定义首页中的模板内容    下面介绍FrontMatter中首页相关属性：       支持doc、home、page    - doc表示页面使用md页面\",\"title\":\"首页配置\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/主题配置\",\"content\":\"      新建docs/.vitepress/theme/index.ts文件作为项目的主题配置文件    VitePress提供了默认主题，在未创建主题配置文件的情况下会直接使用，我们也可以对默认主题进行修改或自定义主题    `ts  i\\u0000mport DefaultTheme from 'vitepress/theme'    ex\",\"title\":\"主题配置\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/VitePress搭建/自动生成目录\",\"content\":\"   在配置解析中介绍了可以通过`themeConfig - sidebar属性生成页面侧边栏目录，但文章数量上去后手动配置侧边栏比较麻烦。可以通过Vite`插件的方式自动读取文件并生成目录       1. 根据目录结构自动生成sidebar  2. 忽略特定前缀名称的目录/文件    比如目录格式为：    `  - d\",\"title\":\"自动生成目录\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/编辑器/VSCode设置\",\"content\":\"   VSCode是目前前端最常用的编辑器，优点无需多说。这里记录下我使用过程中让VSCode变得更好用的一些理解       VSCode中的设置分为三级，打开项目后会读取每一级别的设置，小区域级别的设置会覆盖大区域级别的设置    项目 > 工作区 > 用户       也就是项目中.vscode文件夹下的配置文件，需要手动添加，常\",\"title\":\"VSCode设置\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/编辑器/VSCode插件推荐\",\"content\":\"      名称: Chinese (Simplified) (简体中文) Language Pack for Visual Studio Code    ID: MS-CEINTL.vscode-language-pack-zh-hans       名称: Code Spell Checker    ID: streetsidesoft\",\"title\":\"VSCode插件推荐\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/编辑器/实用语法-JSDoc、Emmet\",\"content\":\"   VSCode、HBuilderX等大部分编辑器均已内置支持，无需额外安装插件       对JS、TS代码添加描述注释，编辑器会识别并在引用处提供代码提示（类似TS类型提示）    也可作为TS项目中JS文件的类型补充    详细查看文档，常用示例如下：    `Type\",\"title\":\"实用语法-JSDoc、Emmet\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/实用工具/Windows实用工具\",\"content\":\"      毫秒级搜索电脑全局文件，还支持搜索文件内容，点击前往官网    Tray    在Microsoft Store中下载，可以通过鼠标或快捷键调节多个屏幕的亮度       同国外比较出\",\"title\":\"Windows实用工具\"},{\"frontMatter\":{\"date\":[1677761461000,1677761461000]},\"path\":\"./工具系列/实用工具/实用浏览器工具\",\"content\":\"      需要梯子或者参考离线安装方式    - Ajax Interceptor        拦截网络请求并自定义返回值，可以在开发中快速模拟部分情况    - FeHelper(前端助手)        JSON自动格式化、排序解码等多种实用功能    - Gl\",\"title\":\"实用浏览器工具\"}],\"outline\":\"deep\",\"outlineTitle\":\"目录\",\"darkModeSwitchLabel\":\"切换主题\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"返回顶部\",\"nav\":[{\"text\":\"前端系列\",\"activeMatch\":\"/前端系列/\",\"link\":\"/前端系列/源码阅读/Axios源码解析\"},{\"text\":\"工具系列\",\"activeMatch\":\"/工具系列/\",\"link\":\"/工具系列/VitePress搭建/基础搭建\"}],\"sidebar\":{\"/前端系列/\":[{\"text\":\"源码系列\",\"items\":[{\"text\":\"Axios\",\"link\":\"/前端系列/源码阅读/Axios源码解析\"}]},{\"text\":\"工程化\",\"items\":[{\"text\":\"JS模块化原理\",\"link\":\"/前端系列/工程化/JS模块化原理\"},{\"text\":\"掌握package.json\",\"link\":\"/前端系列/工程化/掌握package\"}]},{\"text\":\"uniapp\",\"items\":[{\"text\":\"uniapp对比原生小程序\",\"link\":\"/前端系列/uniapp/uniapp对比原生小程序\"},{\"text\":\"解决首页闪烁问题\",\"link\":\"/前端系列/uniapp/解决首页闪烁问题\"},{\"text\":\"实现全局自定义浮层\",\"link\":\"/前端系列/uniapp/实现全局自定义浮层\"}]}],\"/工具系列/\":[{\"text\":\"Vitepress搭建\",\"collapsed\":false,\"items\":[{\"text\":\"基础搭建\",\"link\":\"/工具系列/VitePress搭建/基础搭建\"},{\"text\":\"进阶语法\",\"link\":\"/工具系列/VitePress搭建/进阶语法\"},{\"text\":\"配置解析\",\"link\":\"/工具系列/VitePress搭建/配置解析\"},{\"text\":\"首页配置\",\"link\":\"/工具系列/VitePress搭建/首页配置\"},{\"text\":\"主题配置\",\"link\":\"/工具系列/VitePress搭建/主题配置\"},{\"text\":\"自动生成目录\",\"link\":\"/工具系列/VitePress搭建/自动生成目录\"},{\"text\":\"扩展首页内容\",\"link\":\"/工具系列/VitePress搭建/扩展首页内容\"}]},{\"text\":\"编辑器\",\"items\":[{\"text\":\"VSCode设置\",\"link\":\"/工具系列/编辑器/VSCode设置\"},{\"text\":\"VSCode插件推荐\",\"link\":\"/工具系列/编辑器/VSCode插件推荐\"},{\"text\":\"实用语法-JSDoc、Emmet\",\"link\":\"/工具系列/编辑器/实用语法-JSDoc、Emmet\"},{\"text\":\"HBuilderX设置\",\"link\":\"/工具系列/编辑器/HBuilderX设置\"}]},{\"text\":\"实用工具\",\"collapsed\":false,\"items\":[{\"text\":\"Windows工具\",\"link\":\"/工具系列/实用工具/Windows实用工具\"},{\"text\":\"浏览器工具\",\"link\":\"/工具系列/实用工具/实用浏览器工具\"}]}]},\"editLink\":{\"pattern\":\"https://github.com/Xaviw/XaviDocs/edit/master/docs/:path\",\"text\":\"修改本文\"},\"lastUpdatedText\":\"更新时间\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Xaviw/XaviDocs\"},{\"icon\":{\"svg\":\"<svg t=\\\"1673920149000\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"691\\\" width=\\\"128\\\" height=\\\"128\\\"><title>掘金</title><path d=\\\"M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z\\\" p-id=\\\"692\\\"></path><path d=\\\"M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z\\\" p-id=\\\"693\\\"></path></svg>\"},\"link\":\"https://juejin.cn/user/3192637500426840\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}")</script>
    
  </body>
</html>