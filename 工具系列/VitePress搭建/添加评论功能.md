# Vitepress 添加评论功能

博客想添加评论功能通常有两种方法：

1. 自建或第三方的评论服务
2. 基于 Github Issue 实现

使用第三方评论比较明显的缺陷是需要复杂的注册认证，而且用户评论时大概率也需要注册登录，并且可能会有广告

而基于 Github Issue 实现的评论功能，可以直接借助于 Github 账号登录实现评论，而且评论直接放在仓库 Issue 中个人觉得也更符合技术博客的定位。但这种方案也有缺陷，因为 Github 被墙的问题，可能会有无法访问的情况

## Beaudar 介绍

基于 Github Issues 的评论系统，比较流行的有 [Gitment](https://github.com/imsun/gitment) 和 [Gitalk](https://github.com/gitalk/gitalk) 。它们明显的缺陷是，用户尝试登录评论所要求的权限比较多。在网上有一篇文章——[Gitment 的安全性争议 | 狼煞博客](https://blog.wolfogre.com/posts/security-problem-of-gitment/)中提到：

> 无论是在本博客还是在别的网站，如果评论系统用的是 Gitment，只要你不是百分百信任网站所有者，就尽量不要登录再留言。

另一个比较火的评论系统是 [Utterances](https://github.com/utterance/utterances)，最大的区别在于 utterances 所需的权限少很多，仅限于读写特定仓库的 issues 和 comments，同时还对部署进行了简化

国内有一个 utterances 的中文版本 [Beaudar](http://github.com/beaudar/beaudar)，作者对其的介绍是：

- 开源。📖
- 没有追踪，没有广告，永久免费。♻️
- 不保留数据，所有数据保存在用户 GitHub issue 中。📚
- 有源于 GitHub primer 的多个主题。🌈
- 轻量化，没有字体下载，没有 JS 框架加载。🍜

Beaudar 与 Utterances 有什么不同？

- 中文界面，拉近距离增加评论友好性。
- 头像修改，移动端显示小头像更精致。
- 身份标识，在任何情况下都不会换行。
- 评论时间，缩小至与身份标识相同大。
- 名称显示，评论者名称放大增加辨识。
- 链接打开，从新标签页打开符合习惯。
- 错误信息，使用对话框形式友好呈现。
- 评论头像，增加可以使用 Tab 键选中。
- 加载状态，默认加载状态可配置去除。
- 移除来源，点击加载图标跳转至主页。
- 刷新页面，出现错误异常可进行刷新。
- 保持主题，刷新页面时主题将会保持。
- 分支选项，增加仓库分支项用于校验。
- 评论顺序，可选按时间的升序或倒序。
- 评论位置，可设置评论输入框的位置。

本系统便采用了 Beaudar 支持评论功能，可以在本文下方体验（如果没有出现，尝试刷新或检查是否被墙的问题）

## 使用

在 [Beaudar官网](https://beaudar.lipk.org/) 中提供了配置并获取代码功能，按提示完成配置后可以得到这样的脚本代码：

```html
<script src="https://beaudar.lipk.org/client.js"
        repo="Xaviw/XaviDocs"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
```

加载这段脚本会在
