import{_ as s,b as n,c as a,i as e}from"./app.766cbbad.js";const u=JSON.parse('{"title":"认识package.json","description":"","frontmatter":{},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"Node使用的字段","slug":"node使用的字段","link":"#node使用的字段","children":[{"level":3,"title":"type","slug":"type","link":"#type","children":[]},{"level":3,"title":"main","slug":"main","link":"#main","children":[]},{"level":3,"title":"module","slug":"module","link":"#module","children":[]},{"level":3,"title":"browser","slug":"browser","link":"#browser","children":[]},{"level":3,"title":"exports","slug":"exports","link":"#exports","children":[]},{"level":3,"title":"name","slug":"name","link":"#name","children":[]},{"level":3,"title":"packageManager","slug":"packagemanager","link":"#packagemanager","children":[]}]},{"level":2,"title":"包管理器常用字段","slug":"包管理器常用字段","link":"#包管理器常用字段","children":[{"level":3,"title":"scripts","slug":"scripts","link":"#scripts","children":[]},{"level":3,"title":"dependencies","slug":"dependencies","link":"#dependencies","children":[]},{"level":3,"title":"devDependencies","slug":"devdependencies","link":"#devdependencies","children":[]},{"level":3,"title":"peerDependencies","slug":"peerdependencies","link":"#peerdependencies","children":[]},{"level":3,"title":"files","slug":"files","link":"#files","children":[]},{"level":3,"title":"bin","slug":"bin","link":"#bin","children":[]},{"level":3,"title":"engines","slug":"engines","link":"#engines","children":[]},{"level":3,"title":"version","slug":"version","link":"#version","children":[]},{"level":3,"title":"description","slug":"description","link":"#description","children":[]},{"level":3,"title":"keywords","slug":"keywords","link":"#keywords","children":[]},{"level":3,"title":"homepage","slug":"homepage","link":"#homepage","children":[]},{"level":3,"title":"bugs","slug":"bugs","link":"#bugs","children":[]},{"level":3,"title":"license","slug":"license","link":"#license","children":[]},{"level":3,"title":"author、contributors","slug":"author、contributors","link":"#author、contributors","children":[]},{"level":3,"title":"repository","slug":"repository","link":"#repository","children":[]},{"level":3,"title":"private","slug":"private","link":"#private","children":[]}]}],"relativePath":"前端系列/工程化/掌握package.md","lastUpdated":1678977951000}'),l={name:"前端系列/工程化/掌握package.md"},o=e(`<h1 id="认识package-json" tabindex="-1">认识package.json <a class="header-anchor" href="#认识package-json" aria-hidden="true">#</a></h1><p><code>package.json</code>存在于每个基于<code>node</code>的前端工程化项目中，所以正确的认识该文件中的字段，对理清项目流程、提升工程化能力格外重要</p><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-hidden="true">#</a></h2><p><a href="https://nodejs.cn/api/packages.html#introduction" target="_blank" rel="noreferrer">中文文档</a>中翻译的介绍，理解起来仍有难度。简单来说<code>package.json</code>就是一个包（<code>package</code>）描述文件，在<code>node</code>对包内文件进行处理（比如模块类型识别等）时，会按照最近的平级或上级<code>package.json</code>中描述的规则处理，另外<code>package.json</code>默认不对<code>node_modules</code>目录生效</p><h2 id="node使用的字段" tabindex="-1">Node使用的字段 <a class="header-anchor" href="#node使用的字段" aria-hidden="true">#</a></h2><h3 id="type" tabindex="-1">type <a class="header-anchor" href="#type" aria-hidden="true">#</a></h3><p>目前<code>JS</code>有两种主流模块化方案，分别是<code>Node</code>采用的<code>CommonJS</code>，和最新的<code>ESModule</code>，推荐先阅读<a href="/XaviDocs/前端系列/工程化/JS模块化原理">JS模块化原理</a>熟悉这两种模块化规则。对于不同的模块类型，引擎会采用不同的模块解析器进行处理，所以需要正确的识别模块类型</p><p><code>type</code>默认值为<code>commonjs</code>，所以项目中的文件默认会采用<code>CommonJS</code>模块规则解析。如果指定为<code>module</code>则会采用<code>ESModule</code>模块规则解析</p><p>官方还扩展了<code>.mjs</code>和<code>.cjs</code>扩展名，分别对应<code>ESModule</code>和<code>CommonJS</code>。设置这两种扩展名的文件将始终按对应模块解析器解析，不受<code>type</code>字段限制</p><p>也就是说如果没指定<code>type</code>或指定为<code>commonjs</code>时，项目内要使用<code>ESModule</code>语法，则需要将对应的文件改为<code>.mjs</code>扩展名。反之<code>type</code>指定为<code>module</code>时，应该将<code>CommonJS</code>模块改为<code>.cjs</code>扩展名</p><h3 id="main" tabindex="-1">main <a class="header-anchor" href="#main" aria-hidden="true">#</a></h3><p>定义包的入口文件</p><p>比如在项目中下载了包<code>A</code>，通过<code>import A from &#39;A&#39;</code>方式引入时，实际查找的就是<code>node_modules/A/main定义的路径</code>：</p><h3 id="module" tabindex="-1">module <a class="header-anchor" href="#module" aria-hidden="true">#</a></h3><p><code>module</code>字段最早由<code>rollup</code>提出，目前在中文官网中还没有提到。目的是提供<code>ESModule</code>入口，这样打包器能够利用<code>ESModule</code>的静态分析能力实现<code>TreeShaking</code>功能</p><p>如果打包器支持<code>module</code>字段，则在查找包时，首先会尝试以<code>ESModule</code>规则读取<code>module</code>对应文件</p><h3 id="browser" tabindex="-1">browser <a class="header-anchor" href="#browser" aria-hidden="true">#</a></h3><p>在例如<code>Axios</code>这种同时支持<code>node</code>端和浏览器端的包中，对于不同环境可能依赖于不同的模块（<code>Axios</code>中<code>node</code>环境使用<code>http</code>请求，浏览器环境使用<code>xhr</code>请求），<code>browser</code>字段就是为了更好的实现这一功能</p><p>当使用了例如<code>webpack</code>等打包器时，如果指定环境<code>target</code>为<code>web</code>，则会使用该字段指定的文件规则</p><p>支持单个属性，代表入口文件。也支持定义多个键值对，代表替换对于路径</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 单个字段，代表作为浏览器环境的入口文件</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">browser</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/browser/main.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 指定键值对时，解析对应的键时，会替换到对应值的路径</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">browser</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">module-a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./browser/module-a.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">./server/module-b.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./browser/module-b.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 还支持配置false，防止模块被加载</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">module-c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="exports" tabindex="-1">exports <a class="header-anchor" href="#exports" aria-hidden="true">#</a></h3><p>作为<code>main</code>、<code>module</code>的替代方案，多个字段同时存在时，会优先使用<code>exports</code></p><p>允许定义多个入口点，对于暴露入口较少的情况，官方建议明确指定每个入口点；暴露入口过多时，可以直接导出整个文件夹</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 明确指定每个入口点</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 官方建议同时提供有扩展名和无扩展名的子路径</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./lib/index</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./lib/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 导出整个文件夹</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./feature/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./lib/feature/*.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 导出文件夹中有不想暴露的入口点时，可以明确指定不暴露</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./feature/internal/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>每个路径都应该相当于包根目录</strong>。仅有根目录暴露时，可以简写为：<code>&quot;exports&quot;: &quot;./index.js&quot;</code></p><hr><p>支持条件导出，常用条件包括<code>import</code>、<code>require</code>、<code>default</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 使用import导入时，加载mjs文件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">import</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./index.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 使用require导入时 ，加载cjs文件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">require</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./index.cjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// default作为通用后备选项，应该始终放在最后</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">default</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./index.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 也可以用在导出子路径</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">exports</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">./feature</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">import</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./feature/index.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">require</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./feature/index.cjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>定义<code>exports</code>后，导入非入口点的路径时会抛出<code>ERR_PACKAGE_PATH_NOT_EXPORTED</code>错误</strong></p><h3 id="name" tabindex="-1">name <a class="header-anchor" href="#name" aria-hidden="true">#</a></h3><p>定义包名，也就是发布到<code>npm</code>仓库的名字，需要符合<a href="https://nodejs.cn/npm/cli/v8/configuring-npm/package-json/#name" target="_blank" rel="noreferrer">命名规则</a></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>@a/b</code>格式的包名含义是<code>a</code>范围中名字为<code>b</code>的包，里面的<code>@</code>和<code>/</code>属于命名规范。范围的作用是将一系列相关的包组织在一起，更重要的是不用担心包名重复的问题。如何发布范围，参考<a href="https://nodejs.cn/npm/cli/v8/using-npm/scope/#" target="_blank" rel="noreferrer">官方文档</a></p></div><h3 id="packagemanager" tabindex="-1">packageManager <a class="header-anchor" href="#packagemanager" aria-hidden="true">#</a></h3><p>截至发文仍处于实验性阶段，需要<code>NodeJS</code>版本大于等于<code>16.9.0</code>。基于新版<code>node</code>中附带的<code>corepack</code>包，用于统一项目包管理器，具体可以参考<a href="https://www.jianshu.com/p/c239ed5dedd6" target="_blank" rel="noreferrer">这篇文章</a></p><blockquote><p>如果使用NVM、Volta等工具管理Node版本时，corepack命令可能不可用，可以在官方issue中找到解决办法</p></blockquote><h2 id="包管理器常用字段" tabindex="-1">包管理器常用字段 <a class="header-anchor" href="#包管理器常用字段" aria-hidden="true">#</a></h2><h3 id="scripts" tabindex="-1">scripts <a class="header-anchor" href="#scripts" aria-hidden="true">#</a></h3><p>包自身的运行脚本，例如本文档的启动方式：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vitepress dev</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以通过<code>npm run dev</code>的方式调用对应的<code>vitepress dev</code>命令</p><hr><p><code>npm</code>还提供了前后脚本关键字<code>pre</code>、<code>post</code>，例如</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">preecho</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">echo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">postecho</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>执行<code>npm run echo</code>后会分别调用<code>preecho</code>、<code>echo</code>、<code>postecho</code></p><p>除此之外还提供了一些特定的脚本，可以自行查看<a href="https://nodejs.cn/npm/cli/v8/using-npm/scripts/#life-cycle-scripts" target="_blank" rel="noreferrer">官方文档</a></p><h3 id="dependencies" tabindex="-1">dependencies <a class="header-anchor" href="#dependencies" aria-hidden="true">#</a></h3><p>运行时依赖（运行相关的核心文件），包含包名以及版本的映射，通过<code>npm install xxx</code>（现在<code>--save</code>可以省略）时会自动将<code>xxx</code>添加到<code>dependencies</code>中</p><p>标准的项目版本规则通常为：<code>主版本号.副版本号.修订版本号-预发布标签.预发布版本号</code>，例如<code>vitepress</code>当前版本<code>1.0.0-alpha.49</code>。详情可以查看<a href="https://github.com/npm/node-semver#versions" target="_blank" rel="noreferrer">semver</a></p><p>版本号前可以指定范围符，包括：</p><ul><li><code>&lt;</code>：小于指定版本号</li><li><code>&lt;=</code>：小于对于指定版本号</li><li><code>&gt;</code>、<code>&gt;=</code>同理</li><li><code>=</code>：与指定版本号系统，等号可以省略</li><li>范围标识符可以混用，例如<code>&gt;=1.2.0&lt;2.0.0</code>，也可以使用<code>1.2.0-2.0.0</code>表示</li><li><code>||</code>：指定多个版本范围</li><li><code>x</code>：可以作为通配符，例如<code>1.x</code>表示主版本为1，副版本，修订版本任意</li><li><code>~</code>：指定版本到副版本+1的范围</li><li><code>^</code>：指定版本到首位非0版本号+1的范围</li><li><code>*</code>：匹配任何范围</li><li><code>tag</code>标记：匹配发布为<code>tag</code>的特定版本，例如<code>latest</code>标记</li></ul><p>存在预发布标签时，即使使用范围符，也需要满足主版本号、副版本号、修订版本号相同</p><h3 id="devdependencies" tabindex="-1">devDependencies <a class="header-anchor" href="#devdependencies" aria-hidden="true">#</a></h3><p>开发时依赖（例如代码格式化、测试等，与主题功能无关），内容同<code>dependencies</code>。通过<code>npm install xxx -D</code>（或者<code>--save-dev</code>）时会自动将<code>xxx</code>添加到<code>devDependencies</code>中</p><p>在普通项目开发时，<code>dependencies</code>和<code>devDependencies</code>没有区别，因为打包器是按照导入读取的文件，与依赖项无关。所以普通项目中唯一的作用是可以通过<code>npm install</code>一键安装依赖</p><p>但如果项目要作为包发布，用户引入你的包时，则只会下载<code>dependencies</code>中的依赖</p><h3 id="peerdependencies" tabindex="-1">peerDependencies <a class="header-anchor" href="#peerdependencies" aria-hidden="true">#</a></h3><p>用于指定当前包需要的宿主环境，内容同<code>dependencies</code>，通常在插件中使用</p><p>例如开发<code>vue</code>的插件，如果将<code>vue</code>放在<code>dependencies</code>中，则用户在本身已安装<code>vue</code>的项目中引用你的插件时，还会再安装一次<code>vue</code>，造成浪费。如果定义在<code>peerDependencies</code>中，<code>npm install</code>默认不会重复安装<code>vue</code>，只要定义的版本号与用户已安装版本号匹配，就能直接使用。而如果用户还没有安装对应版本的<code>vue</code>，则会提示用户有<code>peerDependencies</code>未安装</p><h3 id="files" tabindex="-1">files <a class="header-anchor" href="#files" aria-hidden="true">#</a></h3><p>定义包作为依赖被安装时，只包含哪些文件，默认<code>[&quot;*&quot;]</code>也就是全部文件</p><p>无论如何设置，<code>package.json</code>、<code>README</code>、<code>LICENSE/LICENCE</code>、<code>main</code>字段文件始终会包含</p><p>相反，<code>.git</code>等文件会被忽略</p><h3 id="bin" tabindex="-1">bin <a class="header-anchor" href="#bin" aria-hidden="true">#</a></h3><p>定义可执行命令添加到系统环境变量中，例如本文档使用到的<code>zx</code>：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">zx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./build/cli.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 也可以简写，此时命令名称为包名</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./build/cli.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="engines" tabindex="-1">engines <a class="header-anchor" href="#engines" aria-hidden="true">#</a></h3><p>指定适用的<code>node</code>版本，版本规则同依赖项</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">engines</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&gt;=14.0.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="version" tabindex="-1">version <a class="header-anchor" href="#version" aria-hidden="true">#</a></h3><p>发布到<code>npm</code>的版本号</p><h3 id="description" tabindex="-1">description <a class="header-anchor" href="#description" aria-hidden="true">#</a></h3><p>包介绍</p><h3 id="keywords" tabindex="-1">keywords <a class="header-anchor" href="#keywords" aria-hidden="true">#</a></h3><p>包关键字，用于在<code>npm</code>中发现你的包</p><h3 id="homepage" tabindex="-1">homepage <a class="header-anchor" href="#homepage" aria-hidden="true">#</a></h3><p>项目主页地址</p><h3 id="bugs" tabindex="-1">bugs <a class="header-anchor" href="#bugs" aria-hidden="true">#</a></h3><p>项目问题追踪地址或邮件地址</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">例如github issue页地址</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">email</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">email@xxx.com</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="license" tabindex="-1">license <a class="header-anchor" href="#license" aria-hidden="true">#</a></h3><p>项目使用的许可证，表示别人能如何利用你的开源项目</p><h3 id="author、contributors" tabindex="-1">author、contributors <a class="header-anchor" href="#author、contributors" aria-hidden="true">#</a></h3><p>项目开发人员</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">email</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 或者精简为一行</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name &lt;email&gt; (url)</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// contributors格式同author</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">contributors</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="repository" tabindex="-1">repository <a class="header-anchor" href="#repository" aria-hidden="true">#</a></h3><p>包代码所在位置，如<code>github</code>仓库</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">repository</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">git</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://github.com/Xaviw/XaviDocs.git</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 如果包是monorepo（多个包在一个项目下）的一部分，可以指定该包所在的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">directory</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packages/react-dom</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="private" tabindex="-1">private <a class="header-anchor" href="#private" aria-hidden="true">#</a></h3><p>如果设置为<code>true</code>，则<code>npm</code>会拒绝发布该包</p>`,90),p=[o];function c(r,t,i,d,D,F){return n(),a("div",null,p)}const C=s(l,[["render",c]]);export{u as __pageData,C as default};
