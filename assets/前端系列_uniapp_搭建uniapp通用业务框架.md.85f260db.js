import{_ as s,o as n,g as t,O as a}from"./chunks/framework.5b73b90d.js";const C=JSON.parse('{"title":"搭建uniapp通用业务框架","description":"","frontmatter":{},"headers":[],"relativePath":"前端系列/uniapp/搭建uniapp通用业务框架.md","lastUpdated":1680534428000}'),l={name:"前端系列/uniapp/搭建uniapp通用业务框架.md"},e=a(`<h1 id="搭建uniapp通用业务框架" tabindex="-1">搭建uniapp通用业务框架 <a class="header-anchor" href="#搭建uniapp通用业务框架" aria-label="Permalink to &quot;搭建uniapp通用业务框架&quot;">​</a></h1><p><strong>仓库地址：<a href="https://github.com/Xaviw/uniapp-template" target="_blank" rel="noreferrer">https://github.com/Xaviw/uniapp-template</a></strong></p><p>当前<code>1.0</code>版本仅是根据自身业务需求搭建的一套跨端应用开发框架，本人经验有限，功能与开发体验并没有特别完善，例如没有权限控制功能，没有做全端的兼容性处理等...</p><p>开发这个仓库的初衷是让自身业务开发中框架更为易用，以及提升自己逻辑抽离、封装能力。如果业务需求不复杂，可以尝试直接使用本框架。或者同样处在学习阶段的朋友，可以尝试阅读仓库源码可能能够得到部分业务框架搭建灵感</p><blockquote><p>该项目为HBuilderX下使用的模板，可以参考另一个仓库<a href="https://github.com/Xaviw/HBuilderX-Settings" target="_blank" rel="noreferrer">HBuilderX-Settings</a>设置HBuilderX编辑器代码格式化等相关功能</p></blockquote><h2 id="技术栈" tabindex="-1">技术栈 <a class="header-anchor" href="#技术栈" aria-label="Permalink to &quot;技术栈&quot;">​</a></h2><ul><li><p>uni-app</p></li><li><p>Vue 2.x</p></li><li><p>Vuex(HBuilderX 内置，不用安装)</p></li><li><p>uview-ui 2.x</p><p>通过插件市场导入uni_modules，相比于npm安装多了代码提示，使用前先右击<strong>uni_modules/uview-ui-&gt;从插件市场更新</strong></p></li></ul><h2 id="项目配置" tabindex="-1">项目配置 <a class="header-anchor" href="#项目配置" aria-label="Permalink to &quot;项目配置&quot;">​</a></h2><p>根目录下<code>config.js</code>文件中已书写了模板用到的公共配置项，可以搜索配置项查看用途后按需填写，可以自由添加其他配置项</p><blockquote><p>部分方法中可能需要修改的部分已用<code>FIX</code>注释标注，可以全局搜索并查看是否需要修改</p></blockquote><h2 id="样式" tabindex="-1">样式 <a class="header-anchor" href="#样式" aria-label="Permalink to &quot;样式&quot;">​</a></h2><ol><li>定义了类似Tailwind的常用css类，查看<code>style/common.scss</code>、<code>style/generate.scss</code>，<code>generate</code>默认生成范围为<code>0-30</code>，可以自行修改文件顶部的配置项</li><li>按需在<code>style/uview.theme.scss</code>中替换uview主题颜色，uview组件样式并不是直接使用的主题色变量，所以还需要单独配置组件</li><li>按需在<code>style/setUViewConfig.js</code>中自定义uview组件配置，参考<a href="https://www.uviewui.com/components/setting.html#%E4%BF%AE%E6%94%B9uview%E5%86%85%E7%BD%AE%E9%85%8D%E7%BD%AE%E6%96%B9%E6%A1%88" target="_blank" rel="noreferrer">官网介绍</a></li></ol><h3 id="css类列表" tabindex="-1">CSS类列表 <a class="header-anchor" href="#css类列表" aria-label="Permalink to &quot;CSS类列表&quot;">​</a></h3><p>基础样式查看<code>style/common.scss</code>文件，同时uview也提供了部分css类，可以查看<code>uview-ui/libs/css/</code>下的文件，较为实用的有：</p><table><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">对应样式</th><th style="text-align:center;">范围</th></tr></thead><tbody><tr><td style="text-align:center;">u-main-color</td><td style="text-align:center;">color: $u-main-color</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-content-color</td><td style="text-align:center;">color: $u-content-color</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-tips-color</td><td style="text-align:center;">color: $u-tips-color</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-light-color</td><td style="text-align:center;">color: $u-light-color</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-line-x</td><td style="text-align:center;">文本多行省略</td><td style="text-align:center;">1-5</td></tr><tr><td style="text-align:center;">u-reset-button</td><td style="text-align:center;">去除button的所有默认样式</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border</td><td style="text-align:center;">默认边框样式</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border-top</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border-left</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border-right</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border-bottom</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">u-border-top-bottom</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><p><code>generate.scss</code>文件中提供了四个变量：</p><div class="language-scss line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">$num</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 循环生成初始点</span></span>
<span class="line"><span style="color:#A6ACCD;">$sum</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 循环生成终点</span></span>
<span class="line"><span style="color:#A6ACCD;">$step</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 步长，由于设计稿2rpx=1px，故此处步长为2</span></span>
<span class="line"><span style="color:#A6ACCD;">$unit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rpx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//单位</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>按上诉设置后，<code>w-#{$num}</code>会对应<code>width: #{$num * $step}#{$unit}</code>，即<code>w-10</code>对应<code>width: 20rpx</code></p><p>颜色变量使用了<a href="https://www.uviewui.com/components/color.html" target="_blank" rel="noreferrer">uview主题色变量</a>，使用格式为<code>name-type</code>或<code>name-type-level</code>，name对应设置的对象，例如<code>bg -&gt; background</code>；type对应主题，uview中包括<code>primary</code>、<code>success</code>、<code>warning</code>、<code>error</code>、<code>info</code>；level对应颜色的深浅，包括<code>dark</code>、<code>disabled</code>、<code>light</code>，不写level时即为默认的主题颜色</p><p>使用时<code>bg-primary</code>对应<code>background-color: $u-primary</code>，<code>text-primary-dark</code>对应<code>color: $u-primary-dark</code></p><p><strong>后续使用<code>x</code>代替类名中的<code>num</code>，使用<code>y</code>代替生成的值，不再重复书写</strong></p><table><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">对应样式</th><th style="text-align:center;">范围</th><th style="text-align:center;">兼容性</th></tr></thead><tbody><tr><td style="text-align:center;">w-x</td><td style="text-align:center;">width: y</td><td style="text-align:center;">0-60(sum*2)</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">h-x</td><td style="text-align:center;">height: y</td><td style="text-align:center;">0-60(sum*2)</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">p-x</td><td style="text-align:center;">padding: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">px-x</td><td style="text-align:center;">padding: 0 y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">py-x</td><td style="text-align:center;">padding: y 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">pt-x</td><td style="text-align:center;">padding: y 0 0 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">pr-x</td><td style="text-align:center;">padding: 0 y 0 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">pb-x</td><td style="text-align:center;">padding: 0 0 y 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">pl-x</td><td style="text-align:center;">padding: 0 0 0 y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">p-x</td><td style="text-align:center;">margin: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">mx-x</td><td style="text-align:center;">margin: 0 y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">my-x</td><td style="text-align:center;">margin: y 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">mt-x</td><td style="text-align:center;">margin: y 0 0 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">mr-x</td><td style="text-align:center;">margin: 0 y 0 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">mb-x</td><td style="text-align:center;">margin: 0 0 y 0</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">ml-x</td><td style="text-align:center;">margin: 0 0 0 y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-x</td><td style="text-align:center;">border-width: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-t-x</td><td style="text-align:center;">border-top-width: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-r-x</td><td style="text-align:center;">border-right-width: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-b-x</td><td style="text-align:center;">border-bottom-width: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-l-x</td><td style="text-align:center;">border-left-width: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">rounded-x</td><td style="text-align:center;">border-radius: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">leding-x</td><td style="text-align:center;">line-height: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">t-x</td><td style="text-align:center;">top: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">r-x</td><td style="text-align:center;">right: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">b-x</td><td style="text-align:center;">bottom: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">l-x</td><td style="text-align:center;">left: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">text-x</td><td style="text-align:center;">font-size: y</td><td style="text-align:center;">0-30</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">bg-type或bg-type-level</td><td style="text-align:center;">background-color: y</td><td style="text-align:center;">查看上方颜色变量的介绍</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">text-type或text-type-level</td><td style="text-align:center;">color: y</td><td style="text-align:center;">查看上方颜色变量的介绍</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">border-type或border-type-level</td><td style="text-align:center;">border-color: y</td><td style="text-align:center;">查看上方颜色变量的介绍</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">z-x</td><td style="text-align:center;">z-index: x</td><td style="text-align:center;">0-30</td><td style="text-align:center;">非NVUE</td></tr><tr><td style="text-align:center;">w-p-x</td><td style="text-align:center;">width: \${num*10}%</td><td style="text-align:center;">1-10</td><td style="text-align:center;">非NVUE</td></tr><tr><td style="text-align:center;">h-p-x</td><td style="text-align:center;">height: \${num*10}%</td><td style="text-align:center;">1-10</td><td style="text-align:center;">非NVUE</td></tr></tbody></table><h3 id="页面样式" tabindex="-1">页面样式 <a class="header-anchor" href="#页面样式" aria-label="Permalink to &quot;页面样式&quot;">​</a></h3><p>App.vue中设置了全局的根样式</p><div class="language-scss line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// APP NVUE页面不支持标签样式，此处定义类样式是可以vue、nvue通用的</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// APP NVUE页面默认字号18px，其他默认字号16px</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 除H5外，page标签样式只能写在非scope style中</span></span>
<span class="line"><span style="color:#A6ACCD;">page </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// font-size: 28rpx;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> $u-content-color</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> $u-bg-color</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>NVUE页面不支持标签样式，需要单独定义。<code>pages.json -&gt; globalStyle -&gt; app-plus -&gt; background</code>属性与这里的背景色设置一致，便能保证所有页面背景色统一</p><p>另外<code>pages.json</code>文件中对其他样式属性做了说明，可以按需求进行修改</p><h3 id="扩展图标" tabindex="-1">扩展图标 <a class="header-anchor" href="#扩展图标" aria-label="Permalink to &quot;扩展图标&quot;">​</a></h3><p>如果有扩展图标的需求，请在<a href="https://www.iconfont.cn/" target="_blank" rel="noreferrer">iconfont</a>中将图标保存至一个项目后，按uview官方指南-<a href="https://www.uviewui.com/guide/customIcon.html" target="_blank" rel="noreferrer">CustomIcon 扩展自定义图标库</a>进行操作</p><h2 id="请求" tabindex="-1">请求 <a class="header-anchor" href="#请求" aria-label="Permalink to &quot;请求&quot;">​</a></h2><p>使用了<a href="https://www.quanzhan.co/luch-request/guide/3.x/" target="_blank" rel="noreferrer">luch-request</a>库处理请求，相关配置定义在<code>network/request.js</code>中。请求接口定义在根目录api文件夹下，定义方式已有例子，如需额外的请求器实例，参考<code>api/external.js</code>文件与<code>network/request.js</code>文件，重新定义一个实例即可</p><p>同时还扩展了几个自定义属性：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 是否返回原始响应数据 比如：需要获取响应头时使用该属性</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">isReturnNativeResponse</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 请求是否加入时间戳</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">joinTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// GET请求失败重试</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">retryRequest</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">isOpenRetry</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">waitTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>除了上面的默认配置外，api中单独配置方式为：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// api/xxx.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fetchData</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> uni</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$u</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/data</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">custom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">isReturnNativeResponse</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fetchData</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> uni</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$u</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/data</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  params</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">custom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">joinTime</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>另外在响应对象中扩展了<code>cancelOrResetToast</code>属性，作用为取消或手动设置<code>request.js</code>中触发的提示信息：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">fetchData</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/api/xxx.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">fetchData</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 比如fetchData返回500，默认会显示提示信息&quot;服务器错误，请稍后再试！&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 直接调用后则不展示提示信息</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cancelOrResetToast</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 也可以覆盖提示信息</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cancelOrResetToast</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">服务器挂了</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="websocket" tabindex="-1">WebSocket <a class="header-anchor" href="#websocket" aria-label="Permalink to &quot;WebSocket&quot;">​</a></h2><p><code>network/socket.js</code>中定义了通用webSocket类，使用方式：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Socket </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/network/socket.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">string</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">url</span><span style="color:#676E95;font-style:italic;"> - websocket地址</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">number</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">reconnectInterval</span><span style="color:#89DDFF;font-style:italic;">=</span><span style="color:#A6ACCD;font-style:italic;">5*1000</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - 重连间隔时长（毫秒）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">boolean</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">useHeartbeat</span><span style="color:#89DDFF;font-style:italic;">=</span><span style="color:#A6ACCD;font-style:italic;">false</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - 是否开启心跳机制</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">number</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">heartbeatInterval</span><span style="color:#89DDFF;font-style:italic;">=</span><span style="color:#A6ACCD;font-style:italic;">30*1000</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - 心跳间隔时长（毫秒）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">string|function</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">heartbeatData</span><span style="color:#89DDFF;font-style:italic;">=</span><span style="color:#A6ACCD;font-style:italic;">&#39;heartbeat&#39;</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - 心跳发送内容或返回内容的函数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">function</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">onOpen</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - onOpen时触发的钩子函数，例如socket登录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">function</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">[</span><span style="color:#A6ACCD;font-style:italic;">onClose</span><span style="color:#89DDFF;font-style:italic;">]</span><span style="color:#676E95;font-style:italic;"> - onClose时触发的钩子函数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$socket </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Socket</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">$on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">socketMessage</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">$socket</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>socket消息处理定义在<code>utils/socketUtil.js</code>中，用策略模式分别处理对应的消息类型</p><p>如果用到了protobuf序列化，需要替换<code>libs/proto.js</code>文件。在<code>utils/protobufUtil.js</code>中定义了<code>decode</code>、<code>encode</code>、<code>deserialize</code>方法:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">encode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">decode</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">deserialize</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/protobufUtil.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> strategies </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    type</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// commandId，因为protobuf中commandId是唯一的，不需要连同serviceId一起判断</span></span>
<span class="line"><span style="color:#A6ACCD;">    parser</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// protobuf解析方法</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 这里的msg已经是decode后的数据</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 可以使用deserialize解析其中的json数据</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">deserialize</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="自动更新" tabindex="-1">自动更新 <a class="header-anchor" href="#自动更新" aria-label="Permalink to &quot;自动更新&quot;">​</a></h2><p>项目内采用<a href="https://ext.dcloud.net.cn/plugin?id=4200" target="_blank" rel="noreferrer">upushy</a>提供的更新策略，upushy后台配置好应用后，填写<code>config.js</code>中相关配置即可使用</p><h2 id="npm库" tabindex="-1">npm库 <a class="header-anchor" href="#npm库" aria-label="Permalink to &quot;npm库&quot;">​</a></h2><blockquote><p>根据需要增删，建议尽量用lodash-es中的方法，uview自带的部分方法不够严谨</p></blockquote><ol><li>lodash-es</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloneDeep</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>js-base64</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Base64</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">js-base64</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Base64</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#A6ACCD;">(data)</span></span>
<span class="line"><span style="color:#A6ACCD;">base64</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">decode</span><span style="color:#A6ACCD;">(data)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>js-md5</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> md5 </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">js-md5</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#82AAFF;">md5</span><span style="color:#A6ACCD;">(data)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>json-bigint</li></ol><p>socket推送的超长数字，需要使用json-bigint解析，不能直接JSON.parse</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> JSONBig </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">json-bigint</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> parse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">JSONBig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">storeAsString</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parse</span></span>
<span class="line"><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(data)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>tki-qrcode</li></ol><p>生成二维码组件<code>&lt;tki-qrcode :size=&quot;320&quot; :val=&quot;val&quot; loadMake /&gt;</code></p><h2 id="内置组件" tabindex="-1">内置组件 <a class="header-anchor" href="#内置组件" aria-label="Permalink to &quot;内置组件&quot;">​</a></h2><ol><li><code>captcha</code>组件传入字符生成图像验证码<code>&lt;captcha :code=&quot;code&quot; @click.native=&quot;fetchCode&quot; /&gt;</code></li><li><code>sliderVerify</code>组件为滑动解锁组件，按需求修改内部实现<code>&lt;slider-verify :text=&quot;text&quot; @success=&quot;handleNext&quot; :disabled=&quot;disabled&quot; ref=&quot;verify&quot;&gt;</code></li></ol><h2 id="内置工具" tabindex="-1">内置工具 <a class="header-anchor" href="#内置工具" aria-label="Permalink to &quot;内置工具&quot;">​</a></h2><p><code>uview</code>内置了部分实用工具函数，查看<a href="https://www.uviewui.com/js/intro.html" target="_blank" rel="noreferrer">官网介绍</a></p><p>还有部分函数未暴露到<code>$u</code>中，可以手动引入使用，详细可以查看源码<code>@/uni_modules/uview-ui/libs/</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> dayjs </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/uni_modules/uview-ui/libs/util/dayjs.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>此外utils目录下定义了部分常用工具函数:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 手机号、银行卡号脱敏</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hideMobile</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hideBankCard</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/formatter.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 高精度计算</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">minus</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">multiply</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">divide</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/helper.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// uni定位方法promise化</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">getLocation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isSameLocation</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/mapUtil.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 系统原生语音播放，仅APP</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> audioPlay </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/speechSynthesis.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 密码校验、银行卡号校验</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">checkPwd</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">checkBankCard</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/test.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,66),p=[e];function o(r,c,i,y,d,D){return n(),t("div",null,p)}const A=s(l,[["render",o]]);export{C as __pageData,A as default};
